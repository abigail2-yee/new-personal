<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Travels</title>
  <link rel="icon" type="image/png" href="imgs/3-travel.png">
  
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    @font-face {
      font-family: 'BZD_COLOUR_RGB';
      src: url('other-font-otf/bianzhidai_COLR-RGB.otf') format('opentype');
      font-weight: normal;
      font-style: italic;
    }

    body {
      background-color: #F5F5DC;
      height: 100vh;
      display: flex;
    }

    .sidebar {
      width: 20%;
      background-color: #F5F5DC;
      padding: 20px;
      overflow-y: auto;
    }

    .travel-icon {
      width: 80px;
      height: 80px;
      margin-bottom: 20px;
      cursor: pointer;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-10px);
      }
    }

    h2 {
      font-family: 'BZD_COLOUR_RGB', serif;
      font-size: 24px;
      margin-bottom: 20px;
      color: #333;
    }

    .country-list {
      list-style: none;
    }

    .country-item {
        font-family: Arial, sans-serif;
        font-weight: normal;
        font-size: 14px;
        color: #F57C00;
        margin-bottom: 6px; /* reduced from 10px */
        cursor: pointer;
        padding: 6px 12px; /* reduced padding */
        border-radius: 5px;
        transition: background-color 0.3s ease;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .country-item:hover {
      background-color: rgba(245, 124, 0, 0.1);
    }

    .country-item.active {
      background-color: rgba(245, 124, 0, 0.2);
    }

    /* Special styling for home and heart locations */
    .country-item.home {
      color: #2E8B57; /* Sea green for home */
    }

    .country-item.heart {
      color: #DAA520; /* Goldenrod for heart */
    }

    .map-container {
      width: 80%;
      position: relative;
    }

    #map {
      width: 100%;
      height: 100%;
    }

    .leaflet-popup-content-wrapper {
      background-color: #F5F5DC;
      border-radius: 8px;
    }

    .leaflet-popup-content {
      font-family: Arial, sans-serif;
      color: #333;
      text-align: center;
    }

    .popup-title {
        font-family: 'BZD_COLOUR_RGB', serif;
        font-size: 1.4rem;
        color: #F57C00;
        margin-bottom: 8px;
        font-style: italic;
    }

    .popup-description {
      font-size: 0.8rem;
      line-height: 1.2;
    }

    /* Custom marker styles */
    .custom-marker {
      background-color: #F57C00;
      border: 3px solid #fff;
      border-radius: 50%;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    /* Home marker style */
    .home-marker {
      background: transparent;
      border: none;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Heart marker style */
    .heart-marker {
      background: transparent;
      border: none;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Custom orange scrollbar for sidebar (shorter and more transparent) */
    .sidebar::-webkit-scrollbar {
    width: 8px;
    }

    .sidebar::-webkit-scrollbar-track {
    background: #f5f5dc;
    }

    .sidebar::-webkit-scrollbar-thumb {
    background-color: #FFB300; 
    border-radius: 4px;
    height: 33%; /* this visually limits thumb height to ~1/3 of the scroll track */
    }

  </style>
</head>
<body>
  <div class="sidebar">
    <img src="imgs/3-travel.png" alt="Travel" class="travel-icon" onclick="goBack()">
    
    <h2>Places I've explored</h2>

    <p id="countryCount" style="font-family: Arial, sans-serif; font-size: 12px; margin-top: 4px; margin-bottom: 20px; padding-left: 2px; color: #444;"></p>

    
    <ul class="country-list" id="countryList">
      <!-- Countries will be populated by JavaScript -->
    </ul>
  </div>

  <div class="map-container">
    <div id="map"></div>
  </div>

  <!-- Leaflet JavaScript -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  
<script>
  // Travel destinations with coordinates and optional descriptions
  const destinations = [
  {
    name: "France",
    coords: [46.6034, 1.8883],
    continent: "Europe",
    description: "[2022] Paris, Strasbourg, Lyon, Annecy, Chamonix, Grenoble, Nice, Monaco, Eze, Saint Paul de Vence, Cannes, Antibes, Marseilles. I was born to be a flâneuse"
  },
  {
    name: "Netherlands",
    coords: [52.1326, 5.2913],
    continent: "Europe",
    description: "[2022] Amsterdam. Got gastro the first time, got lit the second. Still thinking about Winkel 43's deep-dish apple pie"
  },
  {
    name: "Germany",
    coords: [51.1657, 10.4515],
    continent: "Europe",
    description: "[2022] Munich, Nuremberg, Berlin. Berlin surprised me!"
  },
  {
    name: "Italy",
    coords: [41.8719, 12.5674],
    continent: "Europe",
    description: "[2022] Pisa, Florence, Rome, Naples. I am best friends with anyone who also dearly loves Naples"
  },
  {
    name: "Greece",
    coords: [39.0742, 21.8243],
    continent: "Europe",
    description: "[2022] Santorini, Athens, Mykonos. Greek sunsets are unparalleled"
  },
  {
    name: "Spain",
    coords: [40.4637, -3.7492],
    continent: "Europe",
    description: "[2022] Barcelona, Seville. Spain felt so rich to me, Sevillian tiles delighted me every street I walked on. Doing the salsa with strangers in Marula Cafe will forever be a core memory"
  },
  {
    name: "Portugal",
    coords: [39.3999, -8.2245],
    continent: "Europe",
    description: "[2022] Lisbon. Sintra. Pastéis de nata, need I say more?"
  },
  {
    name: "Switzerland",
    coords: [46.8182, 8.2275],
    continent: "Europe",
    description: "[2022] Zurich, Interlaken, Geneva. My inner glutton came out in every Confiserie Sprüngli I stepped into"
  },
  {
    name: "Belgium",
    coords: [50.5039, 4.4699],
    continent: "Europe",
    description: "[2022] Brussels. Sorry Brussels, we used you to do a stopover in Amsterdam again...!"
  },
  {
    name: "Denmark",
    coords: [56.2639, 9.5018],
    continent: "Europe",
    description: "[2022] Copenhagen. It snowed on our last day"
  },
  {
    name: "Japan",
    coords: [36.2048, 138.2529],
    continent: "Asia",
    description: "[2023] Tokyo, Lake Kawaguchiko, Kyoto, Arashiyama, Mount Yoshino, Nara, Kumano, Nigishima, Katsuura, Shirahama, Okayama, Hiroshima, Himeji."
  },
  {
    name: "Thailand",
    coords: [15.8700, 100.9925],
    continent: "Asia",
    description: "[2023/25] Bangkok, Phuket, Koh Phi Phi, Krabi, Chiang Mai."
  },
  {
    name: "South Korea",
    coords: [35.9078, 127.7669],
    continent: "Asia",
    description: "[2023] Seoul, Busan"
  },
  {
    name: "Hong Kong",
    coords: [22.3193, 114.1694],
    continent: "Asia",
    description: "[2023] I did 9 days solo here, and could've stayed for much longer...!"
  },
  {
    name: "Macau",
    coords: [22.1987, 113.5439],
    continent: "Asia",
    description: "[2023] Day trip from HK."
  },
  {
    name: "China",
    coords: [35.8617, 104.1954],
    continent: "Asia",
    description: "[2023] TBU because there were so many places...I need to check my Wechat!"
  },
  {
    name: "Taiwan",
    coords: [23.6978, 120.9605],
    continent: "Asia",
    description: "[2023/24] Rang in the new year in this beautiful country"
  },
  {
    name: "Vietnam",
    coords: [14.0583, 108.2772],
    continent: "Asia",
    description: "[2025] Hanoi, Sapa, Hoi An, HCM. I need to go back to La.Kao Teahouse"
  }
];

  // Special locations (home and heart)
  const specialLocations = [
    {
      name: "Sydney",
      coords: [-33.8688, 151.2093],
      type: "home",
      description: "Home"
    },
    {
      name: "Melbourne",
      coords: [-37.8136, 144.9631],
      type: "heart",
      description: "A city very dear to my heart"
    }
  ];

  document.getElementById('countryCount').textContent = `${destinations.length} countries visited (in adulthood)`;

  const map = L.map('map', {
    center: [35, 110],
    zoom: 3,
    zoomControl: true,
    scrollWheelZoom: true
  });

  L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
    attribution: '© OpenStreetMap contributors, © CARTO',
    maxZoom: 18
  }).addTo(map);

  const redIcon = L.divIcon({
    className: 'custom-marker',
    iconSize: [20, 20],
    iconAnchor: [10, 10],
    popupAnchor: [0, -10]
  });

  // Home icon (replace 🏠 with your house emoji)
  const homeIcon = L.divIcon({
    className: 'home-marker',
    html: '🏠', // Replace this with your house emoji
    iconSize: [30, 30],
    iconAnchor: [15, 15],
    popupAnchor: [0, -15]
  });

  // Heart icon
  const heartIcon = L.divIcon({
    className: 'heart-marker',
    html: '💛', // Yellow heart emoji
    iconSize: [30, 30],
    iconAnchor: [15, 15],
    popupAnchor: [0, -15]
  });

  const markers = {};
  const countryList = document.getElementById('countryList');

  // Add regular destinations
  destinations.forEach(destination => {
    const popupContent = `
      <div class="popup-title">${destination.name}</div>
      <div class="popup-description">${destination.description || ''}</div>
    `;

    const marker = L.marker(destination.coords, { icon: redIcon }).addTo(map);
    marker.bindPopup(popupContent, {
      maxWidth: 250,
      className: 'custom-popup'
    });

    marker.on('click', () => {
      focusCountry(destination);
    });

    markers[destination.name] = marker;

    // Populate sidebar list
    const listItem = document.createElement('li');
    listItem.textContent = destination.name;
    listItem.className = 'country-item';
    listItem.onclick = (e) => {
      focusCountry(destination);
    };
    countryList.appendChild(listItem);
  });

  // Add special locations (home and heart)
  specialLocations.forEach(location => {
    let icon;
    
    if (location.type === 'home') {
      icon = homeIcon;
    } else if (location.type === 'heart') {
      icon = heartIcon;
    }

    const popupContent = `
      <div class="popup-title">${location.name}</div>
      <div class="popup-description">${location.description}</div>
    `;

    const marker = L.marker(location.coords, { icon: icon }).addTo(map);
    marker.bindPopup(popupContent, {
      maxWidth: 250,
      className: 'custom-popup'
    });

    marker.on('click', () => {
      focusLocation(location);
    });

    markers[location.name] = marker;

    // Note: Not adding to sidebar list - only on map
  });

  function focusCountry(destination) {
    document.querySelectorAll('.country-item').forEach(item => {
      item.classList.remove('active');
    });

    const activeItem = [...countryList.children].find(li => li.textContent === destination.name);
    if (activeItem) activeItem.classList.add('active');

    map.setView(destination.coords, 4, {
      animate: true,
      duration: 1
    });

    markers[destination.name].openPopup();
  }

  function focusLocation(location) {
    document.querySelectorAll('.country-item').forEach(item => {
      item.classList.remove('active');
    });

    const activeItem = [...countryList.children].find(li => li.textContent === location.name);
    if (activeItem) activeItem.classList.add('active');

    map.setView(location.coords, 6, { // Higher zoom for cities
      animate: true,
      duration: 1
    });

    markers[location.name].openPopup();
  }

  function goBack() {
    window.location.href = 'index.html';
  }

  setTimeout(() => {
    const allMarkers = [
      ...destinations.map(d => L.marker(d.coords)),
      ...specialLocations.map(l => L.marker(l.coords))
    ];
    const group = new L.featureGroup(allMarkers);
    map.fitBounds(group.getBounds().pad(0.1));
  }, 100);
</script>

</body>
</html>